#!/usr/bin/env ruby
# dehashrocketify

# 20150206
# 0.1.0

def input_filenames
  if ARGV[0]
    if File.directory?(ARGV[0])
      Dir["#{ARGV[0]}/**/*.rb"]
    else
      Dir[ARGV[0]]
    end
  else
    Dir['*.rb']
  end
end

def ruby_filenames
  input_filenames.reject do |input_filename|
    File.directory?(input_filename)
  end
end

def main
  ruby_filenames.each do |ruby_filename|
    contents = File.read(ruby_filename)
    new_contents = contents.gsub(/\:(\w+) *=>/, "\\1:")
    File.write(ruby_filename, new_contents)
  end
end

main if __FILE__ == $0
